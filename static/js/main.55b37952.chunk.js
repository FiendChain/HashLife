(this.webpackJsonphashlife=this.webpackJsonphashlife||[]).push([[0],{22:function(e,t,i){e.exports=i(28)},27:function(e,t,i){},28:function(e,t,i){"use strict";i.r(t);var n=i(2),r=i.n(n),a=i(12),s=i.n(a),o=i(4),u=i(3),c=i(0),h=i(1),l=i(6),f=i(5),v=i(7),_=function(){function e(t,i,n){Object(c.a)(this,e),this.gl=t,this.create_shader_program(i,n),this.uniforms=[],this.locations=[]}return Object(h.a)(e,[{key:"create_shader_program",value:function(e,t){var i=function(e,t,i){var n=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw console.error(e.getShaderInfoLog(n)),console.error(d(t)),new Error("Unable to compile vertex shader");var r=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(r,i),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw console.error(e.getShaderInfoLog(r)),new Error("Unable to compile fragment shader");var a=e.createProgram();if(e.attachShader(a,n),e.attachShader(a,r),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw console.error(e.getProgramInfoLog(a)),console.error(d(i)),new Error("Unable to construct shader program");return[n,r,a]}(this.gl,e,t),n=Object(v.a)(i,3);this.vertex_shader=n[0],this.fragment_shader=n[1],this.program=n[2]}},{key:"add_uniform",value:function(e,t){var i=this.gl.getUniformLocation(this.program,e);this.uniforms.push(t),this.locations.push(i)}},{key:"bind",value:function(){this.gl.useProgram(this.program);for(var e=0;e<this.uniforms.length;e++){var t=this.uniforms[e],i=this.locations[e];null!==i&&t.apply(i)}}}]),e}();function d(e){return e.split("\n").map((function(e,t){return"".concat(t+1,"\t| ").concat(e)})).join("\n")}var p=function(){function e(t,i,n){Object(c.a)(this,e),this.gl=t,this.data=i,this.vbo=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vbo),t.bufferData(t.ARRAY_BUFFER,i,n)}return Object(h.a)(e,[{key:"bind",value:function(){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,this.vbo)}}]),e}(),m=function(){function e(t){Object(c.a)(this,e),this.gl=t,this.vao=t.createVertexArray(),this.integer_types=new Set([t.INT,t.UNSIGNED_INT])}return Object(h.a)(e,[{key:"add_vertex_buffer",value:function(e,t){var i=this.gl;this.bind(),e.bind();var n,r=0,a=Object(o.a)(t.attributes);try{for(a.s();!(n=a.n()).done;){var s=n.value;i.enableVertexAttribArray(s.index),this.integer_types.has(s.type)?i.vertexAttribIPointer(s.index,s.count,s.type,s.is_normalised,t.stride,r):i.vertexAttribPointer(s.index,s.count,s.type,s.is_normalised,t.stride,r),r+=s.count*s.size}}catch(u){a.e(u)}finally{a.f()}}},{key:"bind",value:function(){this.gl.bindVertexArray(this.vao)}}]),e}(),b=function(){function e(t){Object(c.a)(this,e),this.gl=t,this.stride=0,this.attributes=[]}return Object(h.a)(e,[{key:"push_attribute",value:function(e,t,i,n){var r=this.sizeof(i),a=new g(e,t,i,n,r);this.attributes.push(a),this.stride+=t*r}},{key:"slice",value:function(t,i){var n=new e;return n.stride=this.stride,n.attributes=this.attributes.slice(t,i),n}},{key:"sizeof",value:function(e){var t=this.gl;switch(e){case t.FLOAT:case t.UNSIGNED_INT:case t.INT:return 4;default:throw new Error("Unknown element type: ".concat(e))}}}]),e}(),g=function e(t,i,n,r,a){Object(c.a)(this,e),this.index=t,this.count=i,this.type=n,this.is_normalised=r,this.size=a},y=function(){function e(t){Object(c.a)(this,e),this.callback=t}return Object(h.a)(e,[{key:"apply",value:function(e){this.callback(e)}}]),e}(),w=function(){function e(t,i){Object(c.a)(this,e),this.gl=t,this.buffer=t.createBuffer(),this.count=i.length,t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,i,t.STATIC_DRAW)}return Object(h.a)(e,[{key:"bind",value:function(){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.buffer)}}]),e}(),E="#version 300 es\nprecision mediump float;\n\nin vec2 position;\n\nout vec2 vPosition;\n\nvoid main() {\n    vPosition = vec2((position.x+1.0)/2.0, (-position.y+1.0)/2.0);\n    gl_Position = vec4(position.x, position.y, 0.0, 1.0);\n}",k="#version 300 es\nprecision mediump float;\nprecision highp sampler2D;\n\nin vec2 vPosition;\n\nout vec4 FragColour;\n\nuniform sampler2D uDataTexture;\n\nvoid main() {\n    vec4 cell = texture(uDataTexture, vPosition);\n    float state = 1.0-cell[0];\n    FragColour = vec4(state, state, state, 1.0);\n    // FragColour = vec4(vPosition.x, vPosition.y, 1.0, 1.0);\n}",O=i(13),x=function(){function e(t){Object(c.a)(this,e),this.gl=t,this.clear_colour=new Float32Array([1,1,1,1])}return Object(h.a)(e,[{key:"clear",value:function(){var e=this.gl;e.clearColor.apply(e,Object(O.a)(this.clear_colour)),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}},{key:"draw",value:function(e,t,i){var n=this.gl;i.bind(),e.bind(),t.bind(),n.drawElements(n.TRIANGLES,t.count,n.UNSIGNED_INT,0)}}]),e}(),T=function(){function e(t,i,n){Object(c.a)(this,e),this.gl=t,this.data=i,this.shape=n,this.texture=t.createTexture(),this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.pixelStorei(t.UNPACK_ALIGNMENT,1),t.texImage2D(t.TEXTURE_2D,0,t.R8,n[0],n[1],0,t.RED,t.UNSIGNED_BYTE,this.data)}return Object(h.a)(e,[{key:"bind",value:function(){var e=this.gl;e.bindTexture(e.TEXTURE_2D,this.texture)}},{key:"active",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.gl;this.bind(),t.activeTexture(t.TEXTURE0+e)}}]),e}(),j=function(){function e(t){Object(c.a)(this,e),this.gl=t,this.fb=t.createFramebuffer()}return Object(h.a)(e,[{key:"attach_texture2D",value:function(e){var t=this.gl,i=e.texture;this.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0),this.unbind()}},{key:"bind",value:function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.fb)}},{key:"unbind",value:function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)}}]),e}(),R=function(){function e(t,i,n){Object(c.a)(this,e),this.gl=t,this.shape=n,this.data=i,this.count=n[0]*n[1],this.data_texture=new T(t,this.data,this.shape),this.frame_buffer=new j(t),this.frame_buffer.attach_texture2D(this.data_texture)}return Object(h.a)(e,[{key:"refresh",value:function(){var e=this.gl;e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.shape[0],this.shape[1],e.RED,e.UNSIGNED_BYTE,this.data)}},{key:"bind",value:function(){this.data_texture.active(0)}}]),e}(),A=function e(t,i,n,r){if(Object(c.a)(this,e),void 0===i)return this.population=t,void(this.level=0);this.nw=t,this.ne=i,this.sw=n,this.se=r,this.level=this.nw.level+1,this.population=t.population+i.population+n.population+r.population},S=function(){function e(){Object(c.a)(this,e)}return Object(h.a)(e,[{key:"create",value:function(e,t,i,n){return new A(e,t,i,n)}},{key:"create_tree",value:function(e,t){if(0===t)return this.create(e);var i=this.create_tree(e,t-1);return this.create(i,i,i,i)}},{key:"set",value:function(e,t,i,n){if(0===e.level)return this.create(n);var r=1<<e.level-1,a=[e.nw,e.ne,e.sw,e.se],s=a[0],o=a[1],u=a[2],c=a[3];return t>=r?i<r?s=this.set(s,t-r,i,n):u=this.set(c,t-r,i-r,n):i<r?o=this.set(o,t,i,n):c=this.set(c,t,i-r,n),this.create(s,o,u,c)}},{key:"get",value:function(e,t,i){if(0===e.level)return e.population;var n=1<<e.level-1;return t>=n?i<n?this.get(e.ne,t-n,i):this.get(e.se,t-n,i-n):i<n?this.get(e.nw,t,i):this.get(e.sw,t,i-n)}},{key:"expand",value:function(e){var t=this.create_tree(0,e.level-1),i=this.create(t,t,t,e.nw),n=this.create(t,t,e.ne,t),r=this.create(t,e.sw,t,t),a=this.create(e.se,t,t,t);return this.create(i,n,r,a)}}]),e}(),D=function(e){Object(l.a)(i,e);var t=Object(f.a)(i);function i(e,n,r,a){var s;return Object(c.a)(this,i),(s=t.call(this,e,n,r,a)).result=null,s}return i}(A),U=function(e){Object(l.a)(i,e);var t=Object(f.a)(i);function i(e){var n;return Object(c.a)(this,i),(n=t.call(this)).time_compression=e,n}return Object(h.a)(i,[{key:"create",value:function(e,t,i,n){return D(e,t,i,n)}},{key:"create_horizontal",value:function(e,t){return this.create(e.ne,t.nw,e.se,t.sw)}},{key:"create_vertical",value:function(e,t){return this.create(e.sw,e.se,t.nw,t.ne)}},{key:"create_center",value:function(e){return this.create(e.nw.se,e.ne.sw,e.sw.ne,e.se.nw)}},{key:"get_next_generation",value:function(e){if(null!==e.result)return e.result;if(0===e.population)return e.result=e.nw,e.result;if(2===e.level)return e.result=this.slow_simulation(e),e.result;var t=e.nw,i=this.create_horizontal(e.nw,e.ne),n=e.ne,r=this.create_vertical(e.nw,e.sw),a=this.create_center(e),s=this.create_vertical(e.ne,e.se),o=e.sw,u=this.create_horizontal(e.sw,e.se),c=e.se;this.time_compression?(t=this.get_next_generation(t),i=this.get_next_generation(i),n=this.get_next_generation(n),r=this.get_next_generation(r),a=this.get_next_generation(a),s=this.get_next_generation(s),o=this.get_next_generation(o),u=this.get_next_generation(u),c=this.get_next_generation(c)):(t=this.create_center(t),i=this.create_center(i),n=this.create_center(n),r=this.create_center(r),a=this.create_center(a),s=this.create_center(s),o=this.create_center(o),u=this.create_center(u),c=this.create_center(c));var h=this.create(t,i,r,a),l=this.create(i,n,a,s),f=this.create(r,a,o,u),v=this.create(a,s,u,c);return h=this.get_next_generation(h),l=this.get_next_generation(l),f=this.get_next_generation(f),v=this.get_next_generation(v),e.result=this.create(h,l,f,v),e.result}},{key:"slow_simulation",value:function(e){for(var t=0,i=0;i<4;i++)for(var n=0;n<4;n++)t|=this.get(e,i,n)<<i+4*n;var r=this.create(this.one_generation(t>>0)),a=this.create(this.one_generation(t>>1)),s=this.create(this.one_generation(t>>4)),o=this.create(this.one_generation(t>>5));return this.create(r,a,s,o)}},{key:"one_generation",value:function(e){if(0===e)return 0;var t=e>>5&1;e&=1879;for(var i=0;0!==e;)i++,e&=e-1;return 3===i||2===i&&0!==t?1:0}}]),i}(S),F=function(e){Object(l.a)(i,e);var t=Object(f.a)(i);function i(e,n,r,a){var s;return Object(c.a)(this,i),(s=t.call(this,e,n,r,a)).address=i.generate_id(),s}return Object(h.a)(i,[{key:"equals",value:function(e,t,i,n){if(void 0===t){var r=e;return 0===this.level&&this.population===r}return e.level===this.level-1&&(e===this.nw&&t===this.ne&&i===this.sw&&n===this.se)}}],[{key:"generate_id",value:function(){var e=i.CurrentID;return i.CurrentID+=7,e}}]),i}(D);F.CurrentID=101;var N=function(e){Object(l.a)(i,e);var t=Object(f.a)(i);function i(e){var n;return Object(c.a)(this,i),(n=t.call(this,e)).map={},n.hits=0,n.misses=0,n.count=0,n}return Object(h.a)(i,[{key:"create_instance",value:function(e,t,i,n){return new F(e,t,i,n)}},{key:"create",value:function(e,t,i,n){var r=this.hash_code(e,t,i,n),a=this.map[r];if(void 0==a){var s=this.create_instance(e,t,i,n);return this.map[r]=[s],this.misses+=1,this.count+=1,s}var u,c=Object(o.a)(a);try{for(c.s();!(u=c.n()).done;){var h=u.value;if(h.equals(e,t,i,n))return this.hits+=1,h}}catch(f){c.e(f)}finally{c.f()}this.misses+=1,this.count+=1;var l=this.create_instance(e,t,i,n);return a.push(l),l}},{key:"clear",value:function(){this.map={}}},{key:"hash_code",value:function(e,t,i,n){return void 0===t?e:e.address+11*t.address+101*i.address+1007*n.address}}]),i}(U),I=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(c.a)(this,e),this.factory=new N(i),this.root=this.factory.create_tree(0,t),this.construct_buffer(t)}return Object(h.a)(e,[{key:"construct_buffer",value:function(e){var t=1<<e;this.shape=[t,t],this.count=t*t,this.buffer=new Uint8Array(this.count)}},{key:"randomise",value:function(e,t,i,n){void 0===e&&(e=0,i=0,t=1<<this.root.level,n=1<<this.root.level);var r=this.randomise_recursive(this.root,e,t,i,n);this.update_buffer(r,this.root),this.root=r}},{key:"map_relative_to_abs_coords",value:function(e,t){return[e*this.shape[0],t*this.shape[1]]}},{key:"clear",value:function(e,t,i,n){void 0===e&&(e=0,i=0,t=1<<this.root.level,n=1<<this.root.level);var r=this.fill_recursive(this.root,0,e,t,i,n);this.update_buffer(r,this.root),this.root=r}},{key:"fill_recursive",value:function(e,t,i,n,r,a){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=1<<e.level-1,c=1<<e.level;if(i>=c||r>=c||n<0||a<0)return e;if(0===e.level)return this.factory.create(t);var h=this.fill_recursive(e.nw,t,i,P(n,u-1),r,P(a,u-1),s,o),l=this.fill_recursive(e.ne,t,C(0,i-u),n-u,r,P(a,u-1),s+u,o),f=this.fill_recursive(e.sw,t,i,P(n,u-1),C(0,r-u),a-u,s,o+u),v=this.fill_recursive(e.se,t,C(0,i-u),n-u,C(0,r-u),a-u,s+u,o+u),_=this.factory.create(h,l,f,v);return _}},{key:"randomise_recursive",value:function(e,t,i,n,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=1<<e.level-1,u=1<<e.level;if(t>=u||n>=u||i<0||r<0)return e;if(0===e.level){var c=Math.random()>.5?1:0;return this.factory.create(c)}var h=this.randomise_recursive(e.nw,t,P(i,o-1),n,P(r,o-1),a,s),l=this.randomise_recursive(e.ne,C(0,t-o),i-o,n,P(r,o-1),a+o,s),f=this.randomise_recursive(e.sw,t,P(i,o-1),C(0,n-o),r-o,a,s+o),v=this.randomise_recursive(e.se,C(0,t-o),i-o,C(0,n-o),r-o,a+o,s+o),_=this.factory.create(h,l,f,v);return _}},{key:"step",value:function(){var e=void 0;e=this.root.level>=8?this.wrapped_step(this.root):this.expanding_step(this.root),this.update_buffer(e,this.root),this.root=e}},{key:"expanding_step",value:function(e){for(;;){var t=[e.nw,e.ne,e.sw,e.se],i=t[0],n=t[1],r=t[2],a=t[3];if(!(e.level<3||i.population!==i.se.se.population||n.population!==n.sw.sw.population||r.population!==r.ne.ne.population||a.population!==a.nw.nw.population))break;e=this.factory.expand(e)}return this.factory.get_next_generation(e)}},{key:"wrapped_step",value:function(e){var t=this.factory.get_next_generation(e),i=this.factory.create(e.ne,e.nw,e.se,e.sw),n=this.factory.create(e.sw,e.se,e.nw,e.ne),r=this.factory.create(e.se,e.sw,e.ne,e.nw);i=this.factory.get_next_generation(i),n=this.factory.get_next_generation(n),r=this.factory.get_next_generation(r);var a=this.factory.create(r.se,n.sw,i.ne,t.nw),s=this.factory.create(n.se,r.sw,t.ne,i.nw),o=this.factory.create(i.se,t.sw,r.ne,n.nw),u=this.factory.create(t.se,i.sw,n.ne,r.nw);return this.factory.create(a,s,o,u)}},{key:"update_buffer",value:function(e,t){this.draw_recursive(e,t,this.buffer,this.shape,0,this.shape[0],0,this.shape[1])}},{key:"draw_recursive",value:function(e,t,i,n,r,a,s,o){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0;if(e!==t){var h=1<<e.level-1,l=1<<e.level;if(!(r>=l||s>=l||a<0||o<0))if(0!==e.level)this.draw_recursive(e.nw,t.nw,i,n,r,P(a,h-1),s,P(o,h-1),u,c),this.draw_recursive(e.ne,t.ne,i,n,C(0,r-h),a-h,s,P(o,h-1),u+h,c),this.draw_recursive(e.sw,t.sw,i,n,r,P(a,h-1),C(0,s-h),o-h,u,c+h),this.draw_recursive(e.se,t.se,i,n,C(0,r-h),a-h,C(0,s-h),o-h,u+h,c+h);else{var f=e.population>0?255:0;i[u+r+(c+s)*n[0]]=f}}}}]),e}();function P(e,t){return e>=t?t:e}function C(e,t){return e>=t?e:t}var M={vertex_data:new Float32Array([-1,-1,-1,1,1,-1,1,1]),index_data:new Uint32Array([0,3,1,0,2,3])},B=function(){function e(t,i,n){Object(c.a)(this,e),this.gl=t,this.renderer=new x(t),this.shader=new _(t,E,k),this.shader.add_uniform("uDataTexture",new y((function(e){return t.uniform1i(e,0)}))),this.vbo=new p(t,M.vertex_data,t.STATIC_DRAW),this.ibo=new w(t,M.index_data);var r=new b(t);r.push_attribute(0,2,t.FLOAT,!1),this.vao=new m(t),this.vao.add_vertex_buffer(this.vbo,r),this.sim=new I(i,n),this.grid=new R(t,this.sim.buffer,this.sim.shape),this.steps=0,this.listeners=new Set}return Object(h.a)(e,[{key:"update_settings",value:function(e,t){var i=this.gl;this.sim=new I(e,t),this.grid=new R(i,this.sim.buffer,this.sim.shape)}},{key:"listen",value:function(e){this.listeners.add(e)}},{key:"notify",value:function(){var e,t=Object(o.a)(this.listeners);try{for(t.s();!(e=t.n()).done;){(0,e.value)({steps:this.steps,nodes:this.sim.factory.count})}}catch(i){t.e(i)}finally{t.f()}}},{key:"run",value:function(){requestAnimationFrame(this.loop.bind(this))}},{key:"loop",value:function(){this.on_update(),this.on_render(),requestAnimationFrame(this.loop.bind(this))}},{key:"on_update",value:function(){this.running&&this.step()}},{key:"step",value:function(){this.sim.step(),this.steps+=1,this.grid.refresh(),this.notify()}},{key:"clear",value:function(e,t,i,n){var r=this.sim.map_relative_to_abs_coords(e,i),a=Object(v.a)(r,2);e=a[0],i=a[1];var s=this.sim.map_relative_to_abs_coords(t,n),o=Object(v.a)(s,2);t=o[0],n=o[1],this.sim.clear(e,t,i,n),this.steps=0,this.grid.refresh(),this.notify()}},{key:"randomise",value:function(e,t,i,n){var r=this.sim.map_relative_to_abs_coords(e,i),a=Object(v.a)(r,2);e=a[0],i=a[1];var s=this.sim.map_relative_to_abs_coords(t,n),o=Object(v.a)(s,2);t=o[0],n=o[1],this.sim.randomise(e,t,i,n),this.grid.refresh(),this.notify()}},{key:"on_render",value:function(){this.shader.bind(),this.vao.bind(),this.ibo.bind(),this.grid.bind(),this.renderer.clear(),this.renderer.draw(this.vao,this.ibo,this.shader)}}]),e}(),L=i(10),X=(i(27),function(e){Object(l.a)(i,e);var t=Object(f.a)(i);function i(e){var r;return Object(c.a)(this,i),(r=t.call(this,e)).ref=Object(n.createRef)(),r.state={failed_webgl:!1,running:!1,nodes:0,steps:0,time_compression:!0,size:10},r.controller=new z,r}return Object(h.a)(i,[{key:"componentDidMount",value:function(){var e=this,t=this.ref.current.getContext("webgl2");if(t){var i=new B(t,this.state.size,this.state.time_compression);i.run(),this.is_randomise=!1,this.is_clear=!1,this.app=i,this.app.listen((function(t){setTimeout((function(){return e.on_stats(t)}),0)})),this.controller.listen_drag((function(t){var i=t.start,n=t.end,r=Math.min(i[0],n[0]),a=Math.max(i[0],n[0]),s=Math.min(i[1],n[1]),o=Math.max(i[1],n[1]);e.is_randomise?e.app.randomise(r,a,s,o):e.is_clear&&e.app.clear(r,a,s,o)}))}else this.setState(Object(u.a)(Object(u.a)({},this.state),{},{failed_webgl:!0}))}},{key:"on_stats",value:function(e){var t=e.steps,i=e.nodes;this.setState(Object(u.a)(Object(u.a)({},this.state),{},{steps:t,nodes:i}))}},{key:"step",value:function(){this.app.step()}},{key:"toggle",value:function(){this.app.running=!this.app.running,this.setState(Object(u.a)(Object(u.a)({},this.state),{},{running:this.app.running}))}},{key:"on_mouse_down",value:function(e){switch(this.controller.on_mouse_down(e),e.button){case 0:this.is_randomise=!0,this.is_clear=!1;break;case 2:this.is_randomise=!1,this.is_clear=!0}}},{key:"on_mouse_move",value:function(e){}},{key:"on_mouse_up",value:function(e){this.controller.on_mouse_up(e),this.is_randomise=!1,this.is_clear=!1,e.preventDefault()}},{key:"clear",value:function(e){this.app.clear()}},{key:"randomise",value:function(e){this.app.randomise()}},{key:"render",value:function(){var e=this;return this.state.failed_webgl?r.a.createElement("div",null,"Requires WebGL2 Support"):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"fixed"},this.render_controls(),this.render_settings(),this.render_stats()),r.a.createElement("div",{className:"flex-item"},r.a.createElement("canvas",{className:"view",width:1024,height:1024,ref:this.ref,onMouseDown:function(t){return e.on_mouse_down(t)},onMouseMove:function(t){return e.on_mouse_move(t)},onMouseUp:function(t){return e.on_mouse_up(t)}})))}},{key:"render_controls",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("button",{onClick:function(t){return e.clear()}},"Clear"),!this.state.running&&r.a.createElement("button",{onClick:function(t){return e.step()}},"Step"),r.a.createElement("button",{onClick:function(t){return e.toggle()}},this.state.running?"Pause":"Resume"),r.a.createElement("button",{onClick:function(t){return e.randomise()}},"Randomise"))}},{key:"render_stats",value:function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"Stats"),r.a.createElement("div",null,"Steps: ",this.state.steps),r.a.createElement("div",null,"Nodes: ",this.state.nodes))}},{key:"render_settings",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",null,"Settings"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.app.update_settings(e.state.size,e.state.time_compression)}},r.a.createElement("div",null,r.a.createElement("label",null,"Time compression"),r.a.createElement("input",{type:"checkbox",checked:this.state.time_compression,onChange:function(t){e.setState(Object(u.a)(Object(u.a)({},e.state),{},{time_compression:t.target.checked}))}})),r.a.createElement("div",null,r.a.createElement("label",null,"Depth"),r.a.createElement("input",{type:"number",name:"quantity",min:"2",max:"10",value:this.state.size,onChange:function(t){e.setState(Object(u.a)(Object(u.a)({},e.state),{},{size:t.target.value}))}})),r.a.createElement("button",{type:"submit",className:"button primary small"},"Update Settings")))}}]),i}(r.a.Component)),z=function(){function e(){Object(c.a)(this,e),this.drag_start=L.a.create(),this.drag_end=L.a.create(),this.drag_listeners=new Set}return Object(h.a)(e,[{key:"listen_drag",value:function(e){this.drag_listeners.add(e)}},{key:"get_position",value:function(e){var t=e.target.getBoundingClientRect(),i=e.clientX-t.left,n=e.clientY-t.top;return L.a.fromValues(i/t.width,n/t.height)}},{key:"on_mouse_down",value:function(e){this.drag_start=this.get_position(e)}},{key:"on_mouse_up",value:function(e){this.drag_end=this.get_position(e);var t,i=Object(o.a)(this.drag_listeners);try{for(i.s();!(t=i.n()).done;){(0,t.value)({start:this.drag_start,end:this.drag_end})}}catch(n){i.e(n)}finally{i.f()}}}]),e}();s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(X,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.55b37952.chunk.js.map