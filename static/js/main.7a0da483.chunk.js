(this.webpackJsonphashlife=this.webpackJsonphashlife||[]).push([[0],{22:function(e,t,n){e.exports=n(28)},27:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var i=n(1),r=n.n(i),a=n(12),s=n.n(a),o=n(4),u=n(3),c=n(0),h=n(2),l=n(6),f=n(5),v=n(7),d=function(){function e(t,n,i){Object(c.a)(this,e),this.gl=t,this.create_shader_program(n,i),this.uniforms=[],this.locations=[]}return Object(h.a)(e,[{key:"create_shader_program",value:function(e,t){var n=function(e,t,n){var i=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(i,t),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw console.error(e.getShaderInfoLog(i)),console.error(_(t)),new Error("Unable to compile vertex shader");var r=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw console.error(e.getShaderInfoLog(r)),new Error("Unable to compile fragment shader");var a=e.createProgram();if(e.attachShader(a,i),e.attachShader(a,r),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw console.error(e.getProgramInfoLog(a)),console.error(_(n)),new Error("Unable to construct shader program");return[i,r,a]}(this.gl,e,t),i=Object(v.a)(n,3);this.vertex_shader=i[0],this.fragment_shader=i[1],this.program=i[2]}},{key:"add_uniform",value:function(e,t){var n=this.gl.getUniformLocation(this.program,e);this.uniforms.push(t),this.locations.push(n)}},{key:"bind",value:function(){this.gl.useProgram(this.program);for(var e=0;e<this.uniforms.length;e++){var t=this.uniforms[e],n=this.locations[e];null!==n&&t.apply(n)}}}]),e}();function _(e){return e.split("\n").map((function(e,t){return"".concat(t+1,"\t| ").concat(e)})).join("\n")}var p=function(){function e(t,n,i){Object(c.a)(this,e),this.gl=t,this.data=n,this.vbo=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vbo),t.bufferData(t.ARRAY_BUFFER,n,i)}return Object(h.a)(e,[{key:"bind",value:function(){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,this.vbo)}}]),e}(),m=function(){function e(t){Object(c.a)(this,e),this.gl=t,this.vao=t.createVertexArray(),this.integer_types=new Set([t.INT,t.UNSIGNED_INT])}return Object(h.a)(e,[{key:"add_vertex_buffer",value:function(e,t){var n=this.gl;this.bind(),e.bind();var i,r=0,a=Object(o.a)(t.attributes);try{for(a.s();!(i=a.n()).done;){var s=i.value;n.enableVertexAttribArray(s.index),this.integer_types.has(s.type)?n.vertexAttribIPointer(s.index,s.count,s.type,s.is_normalised,t.stride,r):n.vertexAttribPointer(s.index,s.count,s.type,s.is_normalised,t.stride,r),r+=s.count*s.size}}catch(u){a.e(u)}finally{a.f()}}},{key:"bind",value:function(){this.gl.bindVertexArray(this.vao)}}]),e}(),b=function(){function e(t){Object(c.a)(this,e),this.gl=t,this.stride=0,this.attributes=[]}return Object(h.a)(e,[{key:"push_attribute",value:function(e,t,n,i){var r=this.sizeof(n),a=new g(e,t,n,i,r);this.attributes.push(a),this.stride+=t*r}},{key:"slice",value:function(t,n){var i=new e;return i.stride=this.stride,i.attributes=this.attributes.slice(t,n),i}},{key:"sizeof",value:function(e){var t=this.gl;switch(e){case t.FLOAT:case t.UNSIGNED_INT:case t.INT:return 4;default:throw new Error("Unknown element type: ".concat(e))}}}]),e}(),g=function e(t,n,i,r,a){Object(c.a)(this,e),this.index=t,this.count=n,this.type=i,this.is_normalised=r,this.size=a},y=function(){function e(t){Object(c.a)(this,e),this.callback=t}return Object(h.a)(e,[{key:"apply",value:function(e){this.callback(e)}}]),e}(),w=function(){function e(t,n){Object(c.a)(this,e),this.gl=t,this.buffer=t.createBuffer(),this.count=n.length,t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)}return Object(h.a)(e,[{key:"bind",value:function(){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.buffer)}}]),e}(),E="#version 300 es\nprecision mediump float;\n\nin vec2 position;\n\nout vec2 vPosition;\n\nvoid main() {\n    vPosition = vec2((position.x+1.0)/2.0, (-position.y+1.0)/2.0);\n    gl_Position = vec4(position.x, position.y, 0.0, 1.0);\n}",k="#version 300 es\nprecision mediump float;\nprecision highp sampler2D;\n\nin vec2 vPosition;\n\nout vec4 FragColour;\n\nuniform sampler2D uDataTexture;\n\nvoid main() {\n    vec4 cell = texture(uDataTexture, vPosition);\n    float state = 1.0-cell[0];\n    FragColour = vec4(state, state, state, 1.0);\n    // FragColour = vec4(vPosition.x, vPosition.y, 1.0, 1.0);\n}",O=n(13),x=function(){function e(t){Object(c.a)(this,e),this.gl=t,this.clear_colour=new Float32Array([1,1,1,1])}return Object(h.a)(e,[{key:"clear",value:function(){var e=this.gl;e.clearColor.apply(e,Object(O.a)(this.clear_colour)),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}},{key:"draw",value:function(e,t,n){var i=this.gl;n.bind(),e.bind(),t.bind(),i.drawElements(i.TRIANGLES,t.count,i.UNSIGNED_INT,0)}}]),e}(),T=function(){function e(t,n,i){Object(c.a)(this,e),this.gl=t,this.data=n,this.shape=i,this.texture=t.createTexture(),this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.pixelStorei(t.UNPACK_ALIGNMENT,1),t.texImage2D(t.TEXTURE_2D,0,t.R8,i[0],i[1],0,t.RED,t.UNSIGNED_BYTE,this.data)}return Object(h.a)(e,[{key:"bind",value:function(){var e=this.gl;e.bindTexture(e.TEXTURE_2D,this.texture)}},{key:"active",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.gl;this.bind(),t.activeTexture(t.TEXTURE0+e)}}]),e}(),j=function(){function e(t){Object(c.a)(this,e),this.gl=t,this.fb=t.createFramebuffer()}return Object(h.a)(e,[{key:"attach_texture2D",value:function(e){var t=this.gl,n=e.texture;this.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),this.unbind()}},{key:"bind",value:function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.fb)}},{key:"unbind",value:function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)}}]),e}(),R=function(){function e(t,n,i){Object(c.a)(this,e),this.gl=t,this.shape=i,this.data=n,this.count=i[0]*i[1],this.data_texture=new T(t,this.data,this.shape),this.frame_buffer=new j(t),this.frame_buffer.attach_texture2D(this.data_texture)}return Object(h.a)(e,[{key:"refresh",value:function(){var e=this.gl;e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.shape[0],this.shape[1],e.RED,e.UNSIGNED_BYTE,this.data)}},{key:"bind",value:function(){this.data_texture.active(0)}}]),e}(),A=function e(t,n,i,r){if(Object(c.a)(this,e),void 0===n)return this.population=t,void(this.level=0);this.nw=t,this.ne=n,this.sw=i,this.se=r,this.level=this.nw.level+1,this.population=t.population+n.population+i.population+r.population},S=function(){function e(){Object(c.a)(this,e)}return Object(h.a)(e,[{key:"create",value:function(e,t,n,i){return new A(e,t,n,i)}},{key:"create_tree",value:function(e,t){if(0===t)return this.create(e);var n=this.create_tree(e,t-1);return this.create(n,n,n,n)}},{key:"set",value:function(e,t,n,i){if(0===e.level)return this.create(i);var r=1<<e.level-1,a=[e.nw,e.ne,e.sw,e.se],s=a[0],o=a[1],u=a[2],c=a[3];return t>=r?n<r?s=this.set(s,t-r,n,i):u=this.set(c,t-r,n-r,i):n<r?o=this.set(o,t,n,i):c=this.set(c,t,n-r,i),this.create(s,o,u,c)}},{key:"get",value:function(e,t,n){if(0===e.level)return e.population;var i=1<<e.level-1;return t>=i?n<i?this.get(e.ne,t-i,n):this.get(e.se,t-i,n-i):n<i?this.get(e.nw,t,n):this.get(e.sw,t,n-i)}},{key:"expand",value:function(e){var t=this.create_tree(0,e.level-1),n=this.create(t,t,t,e.nw),i=this.create(t,t,e.ne,t),r=this.create(t,e.sw,t,t),a=this.create(e.se,t,t,t);return this.create(n,i,r,a)}}]),e}(),D=function(e){Object(l.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a){var s;return Object(c.a)(this,n),(s=t.call(this,e,i,r,a)).result=null,s}return n}(A),U=function(e){Object(l.a)(n,e);var t=Object(f.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this)).time_compression=e,i}return Object(h.a)(n,[{key:"create",value:function(e,t,n,i){return D(e,t,n,i)}},{key:"create_horizontal",value:function(e,t){return this.create(e.ne,t.nw,e.se,t.sw)}},{key:"create_vertical",value:function(e,t){return this.create(e.sw,e.se,t.nw,t.ne)}},{key:"create_center",value:function(e){return this.create(e.nw.se,e.ne.sw,e.sw.ne,e.se.nw)}},{key:"get_next_generation",value:function(e){if(null!==e.result)return e.result;if(0===e.population)return e.result=e.nw,e.result;if(2===e.level)return e.result=this.slow_simulation(e),e.result;var t=e.nw,n=this.create_horizontal(e.nw,e.ne),i=e.ne,r=this.create_vertical(e.nw,e.sw),a=this.create_center(e),s=this.create_vertical(e.ne,e.se),o=e.sw,u=this.create_horizontal(e.sw,e.se),c=e.se;this.time_compression?(t=this.get_next_generation(t),n=this.get_next_generation(n),i=this.get_next_generation(i),r=this.get_next_generation(r),a=this.get_next_generation(a),s=this.get_next_generation(s),o=this.get_next_generation(o),u=this.get_next_generation(u),c=this.get_next_generation(c)):(t=this.create_center(t),n=this.create_center(n),i=this.create_center(i),r=this.create_center(r),a=this.create_center(a),s=this.create_center(s),o=this.create_center(o),u=this.create_center(u),c=this.create_center(c));var h=this.create(t,n,r,a),l=this.create(n,i,a,s),f=this.create(r,a,o,u),v=this.create(a,s,u,c);return h=this.get_next_generation(h),l=this.get_next_generation(l),f=this.get_next_generation(f),v=this.get_next_generation(v),e.result=this.create(h,l,f,v),e.result}},{key:"slow_simulation",value:function(e){for(var t=0,n=0;n<4;n++)for(var i=0;i<4;i++)t|=this.get(e,n,i)<<n+4*i;var r=this.create(this.one_generation(t>>0)),a=this.create(this.one_generation(t>>1)),s=this.create(this.one_generation(t>>4)),o=this.create(this.one_generation(t>>5));return this.create(r,a,s,o)}},{key:"one_generation",value:function(e){if(0===e)return 0;var t=e>>5&1;e&=1879;for(var n=0;0!==e;)n++,e&=e-1;return 3===n||2===n&&0!==t?1:0}}]),n}(S),F=function(e){Object(l.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a){var s;return Object(c.a)(this,n),(s=t.call(this,e,i,r,a)).address=n.generate_id(),s}return Object(h.a)(n,[{key:"equals",value:function(e,t,n,i){if(void 0===t){var r=e;return 0===this.level&&this.population===r}return e.level===this.level-1&&(e===this.nw&&t===this.ne&&n===this.sw&&i===this.se)}}],[{key:"generate_id",value:function(){var e=n.CurrentID;return n.CurrentID+=7,e}}]),n}(D);F.CurrentID=101;var N=function(e){Object(l.a)(n,e);var t=Object(f.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).map={},i.hits=0,i.misses=0,i.count=0,i}return Object(h.a)(n,[{key:"create_instance",value:function(e,t,n,i){return new F(e,t,n,i)}},{key:"create",value:function(e,t,n,i){var r=this.hash_code(e,t,n,i),a=this.map[r];if(void 0===a){var s=this.create_instance(e,t,n,i);return this.map[r]=[s],this.misses+=1,this.count+=1,s}var u,c=Object(o.a)(a);try{for(c.s();!(u=c.n()).done;){var h=u.value;if(h.equals(e,t,n,i))return this.hits+=1,h}}catch(f){c.e(f)}finally{c.f()}this.misses+=1,this.count+=1;var l=this.create_instance(e,t,n,i);return a.push(l),l}},{key:"clear",value:function(){this.map={}}},{key:"hash_code",value:function(e,t,n,i){return void 0===t?e:e.address+11*t.address+101*n.address+1007*i.address}}]),n}(U),I=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(c.a)(this,e),this.factory=new N(n),this.root=this.factory.create_tree(0,t),this.construct_buffer(t)}return Object(h.a)(e,[{key:"construct_buffer",value:function(e){var t=1<<e;this.shape=[t,t],this.count=t*t,this.buffer=new Uint8Array(this.count)}},{key:"randomise",value:function(e,t,n,i){void 0===e&&(e=0,n=0,t=1<<this.root.level,i=1<<this.root.level);var r=this.randomise_recursive(this.root,e,t,n,i);this.update_buffer(r,this.root),this.root=r}},{key:"map_relative_to_abs_coords",value:function(e,t){return[e*this.shape[0],t*this.shape[1]]}},{key:"set_region",value:function(e,t,n,i,r){void 0===e&&(e=0,n=0,t=1<<this.root.level,i=1<<this.root.level);var a=this.fill_recursive(this.root,r,e,t,n,i);this.update_buffer(a,this.root),this.root=a}},{key:"fill_recursive",value:function(e,t,n,i,r,a){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=1<<e.level-1,c=1<<e.level;if(n>=c||r>=c||i<0||a<0)return e;if(0===e.level)return this.factory.create(t);var h=this.fill_recursive(e.nw,t,n,M(i,u-1),r,M(a,u-1),s,o),l=this.fill_recursive(e.ne,t,P(0,n-u),i-u,r,M(a,u-1),s+u,o),f=this.fill_recursive(e.sw,t,n,M(i,u-1),P(0,r-u),a-u,s,o+u),v=this.fill_recursive(e.se,t,P(0,n-u),i-u,P(0,r-u),a-u,s+u,o+u),d=this.factory.create(h,l,f,v);return d}},{key:"randomise_recursive",value:function(e,t,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=1<<e.level-1,u=1<<e.level;if(t>=u||i>=u||n<0||r<0)return e;if(0===e.level){var c=Math.random()>.5?1:0;return this.factory.create(c)}var h=this.randomise_recursive(e.nw,t,M(n,o-1),i,M(r,o-1),a,s),l=this.randomise_recursive(e.ne,P(0,t-o),n-o,i,M(r,o-1),a+o,s),f=this.randomise_recursive(e.sw,t,M(n,o-1),P(0,i-o),r-o,a,s+o),v=this.randomise_recursive(e.se,P(0,t-o),n-o,P(0,i-o),r-o,a+o,s+o),d=this.factory.create(h,l,f,v);return d}},{key:"step",value:function(){var e=void 0;e=this.root.level>=8?this.wrapped_step(this.root):this.expanding_step(this.root),this.update_buffer(e,this.root),this.root=e}},{key:"expanding_step",value:function(e){for(;;){var t=[e.nw,e.ne,e.sw,e.se],n=t[0],i=t[1],r=t[2],a=t[3];if(!(e.level<3||n.population!==n.se.se.population||i.population!==i.sw.sw.population||r.population!==r.ne.ne.population||a.population!==a.nw.nw.population))break;e=this.factory.expand(e)}return this.factory.get_next_generation(e)}},{key:"wrapped_step",value:function(e){var t=this.factory.get_next_generation(e),n=this.factory.create(e.ne,e.nw,e.se,e.sw),i=this.factory.create(e.sw,e.se,e.nw,e.ne),r=this.factory.create(e.se,e.sw,e.ne,e.nw);n=this.factory.get_next_generation(n),i=this.factory.get_next_generation(i),r=this.factory.get_next_generation(r);var a=this.factory.create(r.se,i.sw,n.ne,t.nw),s=this.factory.create(i.se,r.sw,t.ne,n.nw),o=this.factory.create(n.se,t.sw,r.ne,i.nw),u=this.factory.create(t.se,n.sw,i.ne,r.nw);return this.factory.create(a,s,o,u)}},{key:"update_buffer",value:function(e,t){this.draw_recursive(e,t,this.buffer,this.shape,0,this.shape[0],0,this.shape[1])}},{key:"draw_recursive",value:function(e,t,n,i,r,a,s,o){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0;if(e!==t){var h=1<<e.level-1,l=1<<e.level;if(!(r>=l||s>=l||a<0||o<0))if(0!==e.level)this.draw_recursive(e.nw,t.nw,n,i,r,M(a,h-1),s,M(o,h-1),u,c),this.draw_recursive(e.ne,t.ne,n,i,P(0,r-h),a-h,s,M(o,h-1),u+h,c),this.draw_recursive(e.sw,t.sw,n,i,r,M(a,h-1),P(0,s-h),o-h,u,c+h),this.draw_recursive(e.se,t.se,n,i,P(0,r-h),a-h,P(0,s-h),o-h,u+h,c+h);else{var f=e.population>0?255:0;n[u+r+(c+s)*i[0]]=f}}}}]),e}();function M(e,t){return e>=t?t:e}function P(e,t){return e>=t?e:t}var C={vertex_data:new Float32Array([-1,-1,-1,1,1,-1,1,1]),index_data:new Uint32Array([0,3,1,0,2,3])},B=function(){function e(t,n,i){Object(c.a)(this,e),this.gl=t,this.renderer=new x(t),this.shader=new d(t,E,k),this.shader.add_uniform("uDataTexture",new y((function(e){return t.uniform1i(e,0)}))),this.vbo=new p(t,C.vertex_data,t.STATIC_DRAW),this.ibo=new w(t,C.index_data);var r=new b(t);r.push_attribute(0,2,t.FLOAT,!1),this.vao=new m(t),this.vao.add_vertex_buffer(this.vbo,r),this.sim=new I(n,i),this.grid=new R(t,this.sim.buffer,this.sim.shape),this.steps=0,this.listeners=new Set}return Object(h.a)(e,[{key:"update_settings",value:function(e,t){var n=this.gl;this.sim=new I(e,t),this.grid=new R(n,this.sim.buffer,this.sim.shape)}},{key:"listen",value:function(e){this.listeners.add(e)}},{key:"notify",value:function(){var e,t=Object(o.a)(this.listeners);try{for(t.s();!(e=t.n()).done;){(0,e.value)({steps:this.steps,nodes:this.sim.factory.count})}}catch(n){t.e(n)}finally{t.f()}}},{key:"run",value:function(){requestAnimationFrame(this.loop.bind(this))}},{key:"loop",value:function(){this.on_update(),this.on_render(),requestAnimationFrame(this.loop.bind(this))}},{key:"on_update",value:function(){this.running&&this.step()}},{key:"step",value:function(){this.sim.step(),this.steps+=1,this.grid.refresh(),this.notify()}},{key:"clear",value:function(e,t,n,i){this.set(e,t,n,i,0)}},{key:"fill",value:function(e,t,n,i){this.set(e,t,n,i,1)}},{key:"set",value:function(e,t,n,i,r){var a=this.sim.map_relative_to_abs_coords(e,n),s=Object(v.a)(a,2);e=s[0],n=s[1];var o=this.sim.map_relative_to_abs_coords(t,i),u=Object(v.a)(o,2);t=u[0],i=u[1],this.sim.set_region(e,t,n,i,r),this.steps=0,this.grid.refresh(),this.notify()}},{key:"randomise",value:function(e,t,n,i){var r=this.sim.map_relative_to_abs_coords(e,n),a=Object(v.a)(r,2);e=a[0],n=a[1];var s=this.sim.map_relative_to_abs_coords(t,i),o=Object(v.a)(s,2);t=o[0],i=o[1],this.sim.randomise(e,t,n,i),this.grid.refresh(),this.notify()}},{key:"on_render",value:function(){this.shader.bind(),this.vao.bind(),this.ibo.bind(),this.grid.bind(),this.renderer.clear(),this.renderer.draw(this.vao,this.ibo,this.shader)}}]),e}(),L=n(10),X=(n(27),0),z=1,G=2,Y=function(e){Object(l.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).ref=Object(i.createRef)(),r.state={failed_webgl:!1,running:!1,nodes:0,steps:0,time_compression:!0,size:8,editMode:G},r.controller=new q,r}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.ref.current.getContext("webgl2");if(t){var n=new B(t,this.state.size,this.state.time_compression);n.run(),this.is_randomise=!1,this.is_clear=!1,this.app=n,this.app.listen((function(t){setTimeout((function(){return e.on_stats(t)}),0)})),this.controller.listen_drag((function(t){var n=t.start,i=t.end,r=Math.min(n[0],i[0]),a=Math.max(n[0],i[0]),s=Math.min(n[1],i[1]),o=Math.max(n[1],i[1]);switch(console.log(n,i,e.state.editMode),e.state.editMode){case X:e.app.fill(r,a,s,o);break;case G:e.app.randomise(r,a,s,o);break;case z:e.app.clear(r,a,s,o);break;default:return}}))}else this.setState(Object(u.a)(Object(u.a)({},this.state),{},{failed_webgl:!0}))}},{key:"on_stats",value:function(e){var t=e.steps,n=e.nodes;this.setState(Object(u.a)(Object(u.a)({},this.state),{},{steps:t,nodes:n}))}},{key:"step",value:function(){this.app.step()}},{key:"toggle",value:function(){this.app.running=!this.app.running,this.setState(Object(u.a)(Object(u.a)({},this.state),{},{running:this.app.running}))}},{key:"on_mouse_down",value:function(e){0===e.button&&this.controller.on_mouse_down(e)}},{key:"on_mouse_move",value:function(e){}},{key:"on_mouse_up",value:function(e){0===e.button&&(this.controller.on_mouse_up(e),e.preventDefault())}},{key:"clear",value:function(e){this.app.clear()}},{key:"randomise",value:function(e){this.app.randomise()}},{key:"render",value:function(){var e=this;return this.state.failed_webgl?r.a.createElement("div",null,"Requires WebGL2 Support"):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"fixed"},this.render_controls(),this.render_settings(),this.render_stats(),this.render_modes()),r.a.createElement("div",{className:"flex-item"},r.a.createElement("canvas",{className:"view",width:1024,height:1024,ref:this.ref,onMouseDown:function(t){return e.on_mouse_down(t)},onMouseMove:function(t){return e.on_mouse_move(t)},onMouseUp:function(t){return e.on_mouse_up(t)}})))}},{key:"render_controls",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("button",{onClick:function(t){return e.clear()}},"Clear"),!this.state.running&&r.a.createElement("button",{onClick:function(t){return e.step()}},"Step"),r.a.createElement("button",{onClick:function(t){return e.toggle()}},this.state.running?"Pause":"Resume"),r.a.createElement("button",{onClick:function(t){return e.randomise()}},"Randomise"))}},{key:"render_stats",value:function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"Stats"),r.a.createElement("div",null,"Steps: ",this.state.steps),r.a.createElement("div",null,"Nodes: ",this.state.nodes))}},{key:"render_settings",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",null,"Settings"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.app.update_settings(e.state.size,e.state.time_compression)}},r.a.createElement("div",null,r.a.createElement("label",null,"Time compression"),r.a.createElement("input",{type:"checkbox",checked:this.state.time_compression,onChange:function(t){e.setState(Object(u.a)(Object(u.a)({},e.state),{},{time_compression:t.target.checked}))}})),r.a.createElement("div",null,r.a.createElement("label",null,"Depth"),r.a.createElement("input",{type:"number",name:"quantity",min:"2",max:"10",value:this.state.size,onChange:function(t){e.setState(Object(u.a)(Object(u.a)({},e.state),{},{size:t.target.value}))}})),r.a.createElement("button",{type:"submit",className:"button primary small"},"Update Settings")))}},{key:"render_modes",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",null,"Edit mode"),r.a.createElement("select",{value:this.state.editMode,onChange:function(t){var n=Number(t.target.value);e.setState(Object(u.a)(Object(u.a)({},e.state),{},{editMode:n}))}},r.a.createElement("option",{value:X},"Fill"),r.a.createElement("option",{value:z},"Clear"),r.a.createElement("option",{value:G},"Randomise")))}}]),n}(r.a.Component),q=function(){function e(){Object(c.a)(this,e),this.drag_start=L.a.create(),this.drag_end=L.a.create(),this.drag_listeners=new Set}return Object(h.a)(e,[{key:"listen_drag",value:function(e){this.drag_listeners.add(e)}},{key:"get_position",value:function(e){var t=e.target.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;return L.a.fromValues(n/t.width,i/t.height)}},{key:"on_mouse_down",value:function(e){this.drag_start=this.get_position(e)}},{key:"on_mouse_up",value:function(e){this.drag_end=this.get_position(e);var t,n=Object(o.a)(this.drag_listeners);try{for(n.s();!(t=n.n()).done;){(0,t.value)({start:this.drag_start,end:this.drag_end})}}catch(i){n.e(i)}finally{n.f()}}}]),e}();s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Y,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.7a0da483.chunk.js.map